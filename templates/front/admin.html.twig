{% extends "layout.html.twig" %}

{% block title %}
    Admin
{% endblock %}

{% block content %}

    {% for message in app.flashes('notice') %}
        <div class="alert alert-info">
            {{ message }}
        </div>
    {% endfor %}

    {% if is_granted('ROLE_ACHAT') %}
        {% if boxToEdit is empty %}
            <h3>
                <a href="{{ path('new_box') }}" >
                    {% if is_granted('ROLE_ADMIN') %}Service Achat : {% endif %}Créer une nouvelle box
                </a>
            </h3>
        {% else %}
            <h3>
                <a href="{{ path('edit_box', {'id':boxToEdit.id}) }}" >
                    {% if is_granted('ROLE_ADMIN') %}Service Achat : {% endif %}Editer la box #{{ boxToEdit.id }}
                </a>
            </h3>
        {% endif %}
    {% endif %}

    {% if is_granted('ROLE_LOGISTIQUE') %}
        <h3>
            <a href="{{ path('commandes') }}" >
                {% if is_granted('ROLE_ADMIN') %}Service Logistique : {% endif %}Gérer les livraisons
            </a>
        </h3>
    {% endif %}

    {% if is_granted('ROLE_QUALITE') %}
        <h3>
            <a href="{{ path('qualite') }}" >
                {% if is_granted('ROLE_ADMIN') %}Service Qualité : {% endif %}Gérer les conformités
            </a>
        </h3>
    {% endif %}

    <h3>Box archivées :</h3>

    <div class="list-group">
        {% for box in boxList %}
            <a href="{{ path('box_content', {'id': box.id}) }}" class="list-group-item list-group-item-action">Box #{{ box.id }} -
                <span>{{ box.date|localizeddate('none', 'none', 'fr', null, 'MMMM Y') }}</span>
            </a>
        {% endfor %}
    </div>

{% endblock %}
